<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>ECMAScript 2015 &amp; Webcomponents</title>
    <link rel="stylesheet" href="css/styles.css"></link>
    <script src="js/lib/webcomponents/webcomponents-lite.min.js" type="text/javascript"></script>
    <script src="js/es5/bundle.js" type="text/javascript"></script>
</head>
<body>
<az-presentation>
    <az-slide id="start" start next="setup" >
    <p>Welcome!</p>
    
        <az-format-code file-name="This pretty print block is generated with ...">
&lt;az-format-code file-name="This pretty print block is generated with ...">
    &lt;az-format-code file-name="This pretty print block is generated with ...">
        ... and so on !
    &lt;/az-format-code>
&lt;/az-format-code>
        </az-format-code>
    
    </az-slide>

    <az-slide id="setup" detail="setup-step2" next="codesample" >
        <p>Setup ! ( + <img id="nodelogo" src ="https://nodejs.org/static/images/logos/nodejs-new-white-pantone.png" />) </p>
        <az-format-code file-name="cmd >" lang="cmd">
npm install webpack -g
npm install --save-dev babel-loader babel-preset-es2015 raw-loader html-loader script-loader style-loader css-loader
webpack --progress --colors --watch
        </az-format-code>
        
        <az-format-code file-name="Arborescence" lang="tree">

index.html
css
└─styles.css
js
└─webpack.config.js
└─main.js
└─lib
│ └─google-code-prettify
│ │ └─...  // prettify js lib
│ └─webcomponents
│   └─... // webcomponents polyfill
└─es2015
│ └─...  // place your es2015 code here !
└─es5
  └─...  // es5 bundle and old scripts will be placed here
        </az-format-code>
        
    </az-slide>
    
    <az-slide id="setup-step2" detail="setup-step3" ty="800" >      
        <az-format-code file-name="js/webpack.config.js">
path = require('path');
module.exports = {
    entry: "./main.js",
    output: {
        path: path.join(__dirname, 'es5'),
        filename: "bundle.js"
    },
    module: {
        loaders: [
            { test: /\.css$/, loader: "style!css" },
            { test: /\.js$/, loader: 'babel-loader', 
                include: [ path.resolve(__dirname, "es2015") ], 
                query: { presets: ['es2015'] } }
        ]
    },
    resolve: {
        alias: {
            prettify: path.join(__dirname,'lib/google-code-prettify'),
            webcomponents: path.join(__dirname,'lib/webcomponents/webcomponents.js')
        }
    }
};
        </az-format-code>
        
        <az-format-code file-name="js/main.js">
require("./es2015/components/az-format-code/az-format-code.js");
require("./es2015/components/az-presentation/az-presentation.js");
        </az-format-code>
    </az-slide>
    
    <az-slide id="setup-step3" ty="400" >       
<az-format-code file-name="js\es2015\components\az-format-code\az-format-code.js">
require("prettify/prettify.js");
import 'prettify/prettify.css';
import './sunburst.css';
const template = require("html!./template.html");

class FormatCodeElement extends HTMLElement {

    createdCallback() {
        const coloredHTML = prettyPrintOne(this.replaceText(this.innerHTML.trim()), this.getAttribute("lang"));
        this.innerHTML = template;
        this.childNodes[0].innerHTML = coloredHTML;
        this.appendTitle(this.getAttribute("file-name"));
    };
    
    attachedCallback() { };
    
    attributeChangedCallback(attrName, oldVal, newVal) { };
    
    replaceText(str) {
        let str1 = String(str);
        return str1.replace(/\n/g,"<br/>");
    };
    
    appendTitle(text){
        if(text) {
            var titleNode = document.createElement("div");
            titleNode.className = "code-title";
            titleNode.appendChild(document.createTextNode(text));
            this.insertBefore(titleNode, this.firstChild);
        }
    }
}
document.registerElement('az-format-code', FormatCodeElement);  
</az-format-code>   
    
    </az-slide>
    
    
    <az-slide  next="slide3" detail="detail1" id="codesample" tx="1000" rz="45">
        <az-format-code file-name="CollaborateurRowMapper.java">
package fr.allianz.tc.dpi.core.mapper;
import java.sql.ResultSet;
import java.sql.SQLException;

@Component
public class CollaborateurRowMapper implements RowMapper&lt;Collaborateur&gt; {
    @Override
    public Collaborateur mapRow(ResultSet resultSet, int rowNum) throws SQLException {
      if (MapperUtils.hasColumn(resultSet, EVALUATION_COLUMN_DATE_DROIT_REPONSE)) {
        c.setDateModifEvaluation(getDate(EVALUATION_COLUMN_DATE_DROIT_REPONSE));
      }
     return c;
    }
}</az-format-code>
    </az-slide>
    
    <az-slide id="detail1" detail="detail1_1" tx="600" ty="400" rz="45" scale="0.7">
    DETAIL 1
    </az-slide>
    <az-slide id="detail1_1" tx="800" ty="500" rz="45" scale="0.7">
    DETAIL 1
    </az-slide>
    
    <az-slide id="slide3" next="slide4"  tx="2000">
    SLIDE 3
    </az-slide>
    
    <az-slide id="slide4" next="slide5" detail="slide4-1" tx="3000">
		<h1>ES2015 </h1>
		<p>
			Brower Support<BR/>
			Transpile<BR/>
			
			REPL :<BR/>
			http://babeljs.io/repl/<BR/>
			Features :<BR/>
			https://babeljs.io/docs/learn-es2015/#ecmascript-6-features
			<ul>
				<li>Classes</li>
				<li>Template Strings (interpolated string literals)</li>
				<li>Arrows</li>
				<li>let / const</li>
				<li>Map & Set</li>
				<li>Promise</li>
			</ul>
		</p>
    </az-slide>
	<az-slide id="slide4-1"  tx="3000" tY="1000" >
		Brower Support<BR/>
	</az-slide>
	
    <az-slide id="slide5" next="slide6"  tx="4000" scale="1.2">
    Webcomponents <BR/>
	Support<BR/>
	Polyfill<BR/>
	Features<BR/>
	<ul>
		<li>Custom Elements</li>
		<li>Shadow dom</li>
		<li>HTML Imports</li>
		<li>HTML Templates</li>
	</ul>
	Libraries<BR/>
    </az-slide>
    
    <az-slide id="slide6" next="fin"  tx="5000">
    
	<az-format-code file-name="Destructuring : assignment">
let a=0, b=1;
console.log(`a=${a} b=${b}`); // a=0 b=1

[a,b] = [b,a]; 

console.log(`a=${a} b=${b}`); // a=1 b=0	
	</az-format-code>
	
	<az-format-code file-name="Destructuring : parameters">
function test(p1, p2){
  console.log(`p1=${p1} p2=${p2}`);
}

test(8, 9); // p1=8 p2=9

let params = [10, 11];
test(...params); // p1=10 p2=11
	</az-format-code>
	
	
	<az-format-code file-name="Destructuring + default parameters = named parameters !">
function describe({name: x, job: y = "boulanger"}) {
  console.log(`${x} est ${y}`);
}
describe({name: "Paul"}); // Paul est boulanger

describe({name: "Jean", job : "charcutier"}); // Jean est charcutier
	</az-format-code>
	
	
    </az-slide>
    
	<az-slide id="fin" next="start" detail="detail2"  tx="6000">
		<az-format-code file-name="lib/text-utils.js">
export default function clean(str){
	return str.trim();
}
		</az-format-code>
		<az-format-code file-name="lib/math-utils.js">
const PI = 3.1416;
export function plusun = n => n+1;
export function moinsun(n){	return n-1; }
export class MathBuilder{
	constructor(n) {	this.number = n; }
	incPI() { this.number += PI; return this;}
	build() { return this.number; }
	static of(n){return new MathBuilder(n);}
}
		</az-format-code>
		
		<az-format-code file-name="Import">
// 
		</az-format-code>
    </az-slide>
	
	
    <az-slide id="detail2" detail="detail3" tx="5000" ty="600" scale="0.7">
    	<az-format-code file-name="Arrow functions : curryfication example">
function plusX(x) { return n => n+x; };

const plusUn = plusX( 1 );

console.log([1,2,3].map( plusUn ));  // [2,3,4]
	</az-format-code>
    </az-slide>
    
    
    <az-slide id="detail3" tx="5000" ty="800" scale="0.7">
    	<az-format-code file-name="Classes">
class Animal{
	static race() { return "Animal"; }
}
class Dog extends Animal{
	constructor(name) {	super();this._name = name; }
	sit() { console.log(`Sit ${this._name} !`);}
	static race() { return "DOG("+super.race()+")";	}
}
let rex = new Dog('Rex');
rex.sit();
console.log(`${rex._name} is a ${Dog.race()}`);
	</az-format-code>
    </az-slide>
    </az-slide>
	
	
</az-presentation>
</body>
</html>





